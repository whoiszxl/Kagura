# 使用SpringCloud构建项目

## Spring Cloud的一些子项目

1. Spring Cloud Config 配置中心，利用git来集中管理程序的配置
2. Spring Cloud Netflix 由Netflix开发后来又并入Spring Cloud大家庭，它主要提供的模块包括：服务发现、断路器和监控、智能路由、客户端负载均衡等
3. Spring Cloud Bus 消息总线，利用分布式消息将服务和服务实例连接在一起，用于在一个集群中传播状态变化，比如配置更改的事件，可以和Spring Cloud Config联合实现热部署
4. Spring Cloud Cluster 基于zookeeper，redis，hazelcast，consul实现的领导选举和平民状态模式的抽象和实现
5. Spring Cloud Security 在zuul代理中为outh2 rest客户端和认证头转发提供负载均衡
6. Spring Cloud Sleuth 适用于Spring Cloud应用程序的分布式跟踪，与Zipkin，Htrace和基于日志（ELK）的跟踪兼容，可以收集日志。
7. 等等......

## 使用Eureka
Eureka是Netflix开发的服务发现框架,SpringCloud将它集成在自己的子项目spring-cloud-netflix中,实现SpringCloud的服务发现功能

1. 服务注册和发现机制
2. 和Spring Cloud无缝集成
3. 高可用

### 如何集成Eureka Server
1. 添加eureka依赖
```gradle
// 依赖关系
dependencies {

	// Eureka Server
	compile('org.springframework.cloud:spring-cloud-starter-netflix-eureka-server')

    //....
}


dependencyManagement {
	imports {
		mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
	}
}
```
2. 配置properties
```properties
server.port: 8801

eureka.instance.hostname: localhost
eureka.client.registerWithEureka: false
eureka.client.fetchRegistry: false
eureka.client.serviceUrl.defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/

eureka.server.enable-self-preservation=false
```